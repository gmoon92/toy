plugins {
    id "java"
    id "org.springframework.boot"
    id "io.spring.dependency-management"
}

def prop = [
        db_address              : "localhost",
        db_name                 : "dbrestore",
        jdbc_connection_protocol: "jdbc:mysql:",
        jdbc_option             : "createDatabaseIfNotExist=true&serverTimezone=UTC&useLegacyDatetimeCode=false&useUnicode=true&autoReconnect=true&rewriteBatchedStatements=true&characterEncoding=UTF-8"
]

prop.jdbc_url = "${prop.jdbc_connection_protocol}//${prop.db_address}/${prop.db_name}?${prop.jdbc_option}"
prop.jdbc_username = "root"
prop.jdbc_password = "111111"

def dbrestore_db_name = "${prop.db_name}_backup"
def dbrestore_jdbc_url = "${prop.jdbc_connection_protocol}//${prop.db_address}/${dbrestore_db_name}?${prop.jdbc_option}"

group = "com.gmoon.test.dbrestore.dbrestore-web"
description = "dbrestore-web"

dependencies {
    implementation project(":java-core")
    testImplementation project("test:dbrestore:dbrestore-web")

    implementation("org.springframework.boot:spring-boot-starter-web")
    implementation("org.springframework.boot:spring-boot-configuration-processor")
    implementation("org.codehaus.mojo:sql-maven-plugin:3.0.0")

    // persistence
    implementation("org.springframework.boot:spring-boot-starter-data-jpa")
    implementation(libs.querydsl.core)
    implementation("${libs.querydsl.jpa.get()}:jakarta")

    implementation(libs.jdbc.mysql)

    // etc
    compileOnly("org.projectlombok:lombok")
    annotationProcessor("org.projectlombok:lombok")

    // test
    testImplementation("org.springframework.boot:spring-boot-starter-test")
}

applyQuerydslQDomainCodeGen(project)
