# [Claude에게 생각할 시간 주기 (연쇄 사고 프롬프팅으로 성능 향상)](https://platform.claude.com/docs/en/build-with-claude/prompt-engineering/chain-of-thought)

---

> **참고**
>
> 이 팁들은 모든 Claude 모델에 광범위하게 적용되지만, 확장 사고(extended thinking) 모델에 특화된 프롬프팅
> 팁은 [여기](../08-prompt-engineering/13-extended-thinking-tips.md)에서 확인할 수 있습니다.

연구, 분석 또는 문제 해결과 같은 복잡한 작업에 직면했을 때, Claude에게 생각할 공간을 제공하면 성능을 극적으로 향상시킬 수 있습니다. 연쇄 사고(Chain of Thought, CoT) 프롬프팅으로 알려진
이 기법은 Claude가 문제를 단계별로 분해하도록 장려하여 더 정확하고 섬세한 출력을 생성하도록 합니다.

## CoT 구현 전 고려사항

### 왜 Claude에게 생각하게 해야 할까요?

- **정확성:** 문제를 단계별로 진행하면 특히 수학, 논리, 분석 또는 일반적으로 복잡한 작업에서 오류가 줄어듭니다.
- **일관성:** 구조화된 사고는 더 응집력 있고 체계적인 응답으로 이어집니다.
- **디버깅:** Claude의 사고 과정을 보면 프롬프트가 불명확한 부분을 정확히 찾아낼 수 있습니다.

### 왜 Claude에게 생각하게 하지 말아야 할까요?

- 출력 길이 증가가 지연 시간에 영향을 줄 수 있습니다.
- 모든 작업이 심도 있는 사고를 필요로 하는 것은 아닙니다. 성능과 지연 시간의 적절한 균형을 보장하기 위해 CoT를 신중하게 사용하세요.

> **팁**: 복잡한 수학, 다단계 분석, 복잡한 문서 작성 또는 여러 요인이 있는 의사 결정과 같이 사람이 생각해야 하는 작업에 CoT를 사용하세요.

***

## 사고를 위한 프롬프팅 방법

아래의 연쇄 사고 기법은 **복잡도가 낮은 것부터 높은 순서로 정렬**되어 있습니다. 덜 복잡한 방법은 컨텍스트 윈도우에서 더 적은 공간을 차지하지만, 일반적으로 덜 강력합니다.

> **CoT 팁**: 항상 Claude가 사고 과정을 출력하도록 하세요. 사고 과정을 출력하지 않으면 사고가 발생하지 않습니다!

- **기본 프롬프트**: 프롬프트에 "단계별로 생각하세요"를 포함합니다.
    - *어떻게* 생각해야 하는지에 대한 지침이 부족합니다 (특히 작업이 앱, 사용 사례 또는 조직에 매우 특화되어 있는 경우 이상적이지 않음)

  **예시: 기부자 이메일 작성 (기본 CoT)**

  | 역할 | 내용 |
      | ---- | ------- |
  | User | 올해 Care for Kids 프로그램에 대한 기부를 요청하는 개인화된 이메일을 기부자에게 작성하세요.<br/><br/>프로그램 정보:<br/>\<program\>{{PROGRAM_DETAILS}}<br/>\</program><br/><br/>기부자 정보:<br/>\<donor\>{{DONOR_DETAILS}}<br/>\</donor><br/><br/>이메일을 작성하기 전에 단계별로 생각하세요. |

- **안내된 프롬프트**: Claude가 사고 과정에서 따라야 할 구체적인 단계를 개요로 제시합니다.
    - 답변과 사고를 쉽게 구분하고 분리할 수 있는 구조가 부족합니다.

  **예시: 기부자 이메일 작성 (안내된 CoT)**

  | 역할 | 내용 |
      | ---- | ------- |
  | User | 올해 Care for Kids 프로그램에 대한 기부를 요청하는 개인화된 이메일을 기부자에게 작성하세요.<br/><br/>프로그램 정보:<br/>\<program\>{{PROGRAM_DETAILS}}<br/>\</program><br/><br/>기부자 정보:<br/>\<donor\>{{DONOR_DETAILS}}<br/>\</donor><br/><br/>이메일을 작성하기 전에 생각하세요. 먼저, 기부자의 기부 이력과 과거에 지원한 캠페인을 고려하여 어떤 메시지가 이 기부자에게 어필할지 생각하세요. 그런 다음, 기부자의 이력을 고려하여 Care for Kids 프로그램의 어떤 측면이 그들에게 어필할지 생각하세요. 마지막으로, 분석을 사용하여 개인화된 기부자 이메일을 작성하세요. |

- **구조화된 프롬프트**: `<thinking>`과 `<answer>`와 같은 XML 태그를 사용하여 추론과 최종 답변을 분리합니다.

  **예시: 기부자 이메일 작성 (구조화된 안내 CoT)**

  | 역할 | 내용 |
      | ---- | ------- |
  | User | 올해 Care for Kids 프로그램에 대한 기부를 요청하는 개인화된 이메일을 기부자에게 작성하세요.<br/><br/>프로그램 정보:<br/>\<program\>{{PROGRAM_DETAILS}}<br/>\</program><br/><br/>기부자 정보:<br/>\<donor\>{{DONOR_DETAILS}}<br/>\</donor><br/><br/>이메일을 작성하기 전에 \<thinking> 태그에서 생각하세요. 먼저, 기부자의 기부 이력과 과거에 지원한 캠페인을 고려하여 어떤 메시지가 이 기부자에게 어필할지 생각하세요. 그런 다음, 기부자의 이력을 고려하여 Care for Kids 프로그램의 어떤 측면이 그들에게 어필할지 생각하세요. 마지막으로, 분석을 사용하여 \<email> 태그에 개인화된 기부자 이메일을 작성하세요. |

### 예시

**예시: 사고 과정 없는 재무 분석**

단계별 사고 없이, Claude는 합리적으로 보이지만 깊이가 부족한 추천을 제공합니다. 잠재적 결과를 정량화하거나 역사적 시장 성과를 고려하지 않는데, 이는 정보에 입각한 결정을 내리는 데 중요합니다.

| 역할        | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| User      | 당신은 재무 상담사입니다. 고객이 $10,000를 투자하려고 합니다. 두 가지 옵션 중에서 선택할 수 있습니다: A) 역사적으로 연 12%의 수익을 내지만 변동성이 큰 주식, 또는 B) 연 6%를 보장하는 채권. 고객은 집 계약금을 위해 5년 후에 돈이 필요합니다. 어떤 옵션을 추천하시겠습니까?                                                                                                                                                                                                                                                                                                                                                                     |
| Assistant | 제공된 정보를 바탕으로, 저는 옵션 B, 연 6%를 보장하는 채권을 추천합니다. 그 이유는 다음과 같습니다:<br/><br/>1. 확실성: 채권은 연 6%의 보장된 수익을 제공하며, 이는 재무 계획에서 확실성을 제공합니다. 이는 고객이 고정된 일정(5년)으로 특정 재무 목표(계약금)를 가지고 있을 때 중요합니다.<br/>2. 위험 회피: 고객이 중요한 인생 이벤트(주택 구매)를 위해 이 돈이 필요하므로, 위험 감수성이 낮을 가능성이 높습니다. 주식 시장의 변동성은 자금이 필요한 시점에 가까워질 때 하락세가 있으면 계획을 위태롭게 할 수 있습니다.<br/>3. 투자 기간: 단지 5년이므로, 잠재적인 주식 시장 하락으로부터 회복할 시간이 적습니다. 더 긴 투자 기간(10년 이상)은 일반적으로 주식 시장 변동성을 견디는 데 더 적합합니다.<br/><br/>주식의 역사적 12% 수익이 매력적이지만, 과거 성과가 미래 결과를 보장하지는 않습니다. 채권의 보장된 6%는 계약금을 낼 때 고객이 필요한 자금을 확보할 수 있게 합니다. |

**예시: 사고 과정이 있는 재무 분석**

단계별 사고를 통해, 상담사는 훨씬 더 풍부한 분석을 제공합니다. 두 시나리오의 정확한 수치를 계산하고, 역사적 시장 변동성을 고려하며, 고객의 위험 감수성을 깊이 분석합니다. 이러한 철저한 추론은 더 확신 있고
정당화 가능한 추천으로 이어집니다.

| 역할        | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| User      | 당신은 재무 상담사입니다. 고객이 $10,000를 투자하려고 합니다. 두 가지 옵션 중에서 선택할 수 있습니다: A) 역사적으로 연 12%의 수익을 내지만 변동성이 큰 주식, 또는 B) 연 6%를 보장하는 채권. 고객은 집 계약금을 위해 5년 후에 돈이 필요합니다. 어떤 옵션을 추천하시겠습니까? 단계별로 생각하세요.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Assistant | 고객을 위한 최선의 투자 옵션을 결정하기 위해, 여러 요인을 단계별로 고려하겠습니다:<br/><br/>\<thinking><br/>1. 고객의 목표와 일정 이해:<br/>   - 목표: 주택 계약금<br/>   - 일정: 5년<br/>   - 시사점: 이는 단기적이고 우선순위가 높은 재무 목표입니다. 고객은 상당한 위험이나 변동성을 감당할 수 없을 것입니다.<br/><br/>2. 옵션 A (주식) 분석:<br/>   - 장점: 더 높은 역사적 수익(연 12%)<br/>   - 단점: 변동성(상당한 이익 또는 손실 가능성 의미)<br/>   - 잠재적 5년 수익 계산:<br/>     - 최상의 경우(연 12%): $10,000 * (1.12)^5 ≈ $17,623.42<br/>     - 최악의 경우(시장 붕괴): 상당 부분을 잃을 수 있음, 예: 50% 붕괴 = $5,000<br/><br/>3. 옵션 B (채권) 분석:<br/>   - 장점: 보장된 수익(연 6%)<br/>   - 단점: 역사적 주식 성과에 비해 낮은 수익<br/>   - 5년 수익 계산:<br/>     - 보장: $10,000 * (1.06)^5 ≈ $13,382.25<br/><br/>4. 위험 감수성 고려:<br/>   - 목표는 주택 계약금(필수적, 재량적이지 않음)<br/>   - 짧은 일정(5년)은 시장 하락으로부터 회복할 능력을 제한함<br/>   - 결론: 고객은 위험 감수성이 낮을 가능성이 높음<br/><br/>5. 역사적 관점:<br/>   - 주식의 12%는 역사적이며, 보장되지 않음<br/>   - 5년 기간 동안 주식 시장은 크게 변동할 수 있음:<br/>     - 2003-2007 (금융 위기 전): S&P 500 약 82% 상승<br/>     - 2007-2011 (위기 기간): S&P 500 약 2% 하락<br/>   - 결론: 과거 성과가 미래 결과를 보장하지 않으며, 특히 단기적으로는 더욱 그렇습니다<br/><br/>6. 최종 분석:<br/>   - 옵션 A (주식): 더 높은 잠재적 수익이지만 계약금 목표를 달성하지 못할 수 있는 용납할 수 없는 위험<br/>   - 옵션 B (채권): 최상의 주식 시나리오의 약 80%를 달성하도록 보장되며, 자금 확보의 100% 확실성<br/>\</thinking><br/><br/>\<answer><br/>저는 옵션 B, 연 6% 보장 수익의 채권을 추천합니다. 주식의 역사적 12% 수익이 유혹적이지만, 채권은 5년 후 주택 계약금을 위해 $13,382.25를 확보할 수 있도록 보장합니다. 목표의 중요성과 짧은 일정을 고려할 때, 주식의 변동성은 용납할 수 없는 위험을 초래합니다. 채권은 확실성을 제공하며, 이는 이러한 중요한 재무 이정표에 매우 귀중합니다.<br/>\</answer> |

***

## 관련 자료

- [프롬프트 라이브러리](https://platform.claude.com/docs/en/resources/prompt-library/library): 다양한 작업과 사용 사례를 위한 엄선된 프롬프트 모음에서
  영감을 얻으세요.
- [GitHub 프롬프팅 튜토리얼](https://github.com/anthropics/prompt-eng-interactive-tutorial): 문서에서 찾을 수 있는 프롬프트 엔지니어링 개념을 다루는 예제가
  가득한 튜토리얼입니다.
- [Google Sheets 프롬프팅 튜토리얼](https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8): 대화형
  스프레드시트를 통한 가벼운 버전의 프롬프트 엔지니어링 튜토리얼입니다.
