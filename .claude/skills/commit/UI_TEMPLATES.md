# User Interaction Templates

각 프로세스 단계별 사용자 옵션 제시 템플릿을 정형화합니다.

---

## AskUserQuestion 도구 사용 가이드

### 기본 동작

**중요:** AskUserQuestion 도구는 자동으로 **"Other" 옵션을 추가**합니다.

- 사용자가 "Other" 선택 → **직접 텍스트 입력 가능**
- 옵션 선택과 텍스트 입력을 모두 지원

### 도구 파라미터

```json
{
  "questions": [
    {
      "question": "이 커밋 메시지로 진행하시겠습니까?",
      "header": "커밋 확인",
      "multiSelect": false,
      "options": [
        {
          "label": "승인 - 커밋 실행",
          "description": "이 메시지로 git commit을 실행합니다"
        },
        {
          "label": "수정",
          "description": "다른 메시지를 선택하거나 직접 입력합니다"
        },
        {
          "label": "취소",
          "description": "커밋 프로세스를 종료합니다"
        }
      ]
    }
  ]
}
```

**자동 추가되는 옵션:**

```
4. Other (사용자가 직접 입력)
```

### 옵션 작성 규칙

| 필드            | 규칙                     | 예시                         |
|---------------|------------------------|----------------------------|
| `question`    | 명확한 질문형, 한글 권장         | "어떻게 하시겠습니까?"              |
| `header`      | 12자 이하, 태그/레이블 역할      | "커밋 확인", "전략 선택"           |
| `label`       | 1-5 단어, 간결하게           | "승인 - 커밋 실행"               |
| `description` | 상세 설명, 결과 명시           | "이 메시지로 git commit을 실행합니다" |
| `multiSelect` | 기본 false, 다중 선택 시 true | false                      |

---

## 템플릿 1: Tidy First 위반 감지

### 상황

구조적 변경(refactor)과 동작 변경(feat/fix)이 혼재

### 템플릿

```json
{
  "questions": [
    {
      "question": "Tidy First 원칙 위반이 감지되었습니다. 어떻게 하시겠습니까?",
      "header": "Tidy First",
      "multiSelect": false,
      "options": [
        {
          "label": "리셋 후 분리 (권장)",
          "description": "변경사항을 unstage하고 refactor와 feat/fix를 별도 커밋으로 분리합니다. git reset HEAD를 실행합니다."
        },
        {
          "label": "그대로 진행",
          "description": "혼합된 상태로 커밋합니다. 롤백과 리뷰가 어려워질 수 있습니다."
        }
      ]
    }
  ]
}
```

### 화면 출력 (한글)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ Tidy First 원칙 위반 감지!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

감지된 혼합 변경:
  • 구조적 변경 (refactor):
    - BatchJobConfig.java: 메서드 추출
    - BatchService.java: 변수명 개선

  • 동작 변경 (feat):
    - RetryConfig.java: 재시도 로직 추가
    - BatchController.java: 새 엔드포인트 추가

💡 권장사항:
   구조적 변경과 동작 변경을 분리하면 코드 리뷰가 쉽고,
   문제 발생 시 선택적 롤백이 가능합니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Tidy First 원칙 위반이 감지되었습니다. 어떻게 하시겠습니까?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 리셋 후 분리 (권장)
   변경사항을 unstage하고 refactor와 feat/fix를 별도 커밋으로 분리합니다.
   git reset HEAD를 실행합니다.

2. 그대로 진행
   혼합된 상태로 커밋합니다. 롤백과 리뷰가 어려워질 수 있습니다.

3. Other (직접 입력)

선택:
```

---

## 템플릿 2: 논리적 독립성 감지

### 상황

10개 이상 파일이 서로 다른 컨텍스트로 변경됨

### 템플릿

```json
{
  "questions": [
    {
      "question": "커밋 전략을 선택하세요",
      "header": "전략 선택",
      "multiSelect": false,
      "options": [
        {
          "label": "자동 분리 (기본 정책)",
          "description": "각 그룹을 독립적인 커밋으로 분리합니다. 명확한 히스토리, 쉬운 리뷰, 선택적 롤백이 가능합니다."
        },
        {
          "label": "통합 커밋",
          "description": "모든 변경을 하나의 커밋으로 통합합니다. 전체 롤백 시 모든 변경이 함께 되돌려집니다."
        },
        {
          "label": "취소",
          "description": "커밋 프로세스를 종료합니다"
        }
      ]
    }
  ]
}
```

### 화면 출력 (한글)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 논리적으로 독립적인 변경사항 감지!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

감지된 그룹:
  그룹 1: .claude/skills/commit/ (4개 파일)
    - 커밋 자동화 스킬 문서

  그룹 2: ai/docs/claude/ (70개 파일)
    - Claude API 문서 번역

  그룹 3: .claude/agents/ (8개 파일)
    - 번역 에이전트 설정

총 82개 파일이 3개의 독립적인 컨텍스트로 나뉩니다.

💡 도움말:
   통합 커밋은 전체 롤백과 코드 리뷰가 어려워질 수 있습니다.
   기본 정책(자동 분리)을 따르는 것을 권장합니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
커밋 전략을 선택하세요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 자동 분리 (기본 정책)
   각 그룹을 독립적인 커밋으로 분리합니다.
   명확한 히스토리, 쉬운 리뷰, 선택적 롤백이 가능합니다.

2. 통합 커밋
   모든 변경을 하나의 커밋으로 통합합니다.
   전체 롤백 시 모든 변경이 함께 되돌려집니다.

3. 취소
   커밋 프로세스를 종료합니다

4. Other (직접 입력)

선택:
```

---

## 템플릿 3: 커밋 메시지 선택

### 상황

5개 메시지 제안 중 선택

### 템플릿

```json
{
  "questions": [
    {
      "question": "커밋 메시지를 선택하세요",
      "header": "메시지 선택",
      "multiSelect": false,
      "options": [
        {
          "label": "메시지 1 (추천)",
          "description": "docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가\n\n- SKILL.md: 스킬 실행 프로세스 정의\n- RULES.md: 커밋 메시지 형식 규칙\n- EXAMPLES.md: 실제 사용 예시\n- TROUBLESHOOTING.md: 문제 해결 가이드"
        },
        {
          "label": "메시지 2",
          "description": "docs(SKILL.md): 커밋 메시지 자동 생성 스킬 추가\n\n- SKILL.md: 스킬 실행 프로세스 정의\n- RULES.md: 커밋 메시지 형식 규칙\n- EXAMPLES.md: 실제 사용 예시\n- TROUBLESHOOTING.md: 문제 해결 가이드"
        },
        {
          "label": "메시지 3",
          "description": "docs(commit-skill): 커밋 스킬 문서 추가\n\n- 커밋 자동화 스킬 문서\n- 메시지 형식 규칙 정의"
        },
        {
          "label": "메시지 4",
          "description": "docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가"
        }
      ]
    }
  ]
}
```

**중요:** 5번째 메시지는 options에 포함하지 않아도, "Other" 옵션이 자동 추가됨.

### 화면 출력 (한글)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 커밋 메시지를 선택하세요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 메시지 1 (추천)
   docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

   - SKILL.md: 스킬 실행 프로세스 정의
   - RULES.md: 커밋 메시지 형식 규칙
   - EXAMPLES.md: 실제 사용 예시
   - TROUBLESHOOTING.md: 문제 해결 가이드

2. 메시지 2
   docs(SKILL.md): 커밋 메시지 자동 생성 스킬 추가

   - SKILL.md: 스킬 실행 프로세스 정의
   - RULES.md: 커밋 메시지 형식 규칙
   - EXAMPLES.md: 실제 사용 예시
   - TROUBLESHOOTING.md: 문제 해결 가이드

3. 메시지 3
   docs(commit-skill): 커밋 스킬 문서 추가

   - 커밋 자동화 스킬 문서
   - 메시지 형식 규칙 정의

4. 메시지 4
   docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

5. Other (직접 입력)
   커밋 메시지를 직접 작성합니다

선택:
```

**사용자가 "5. Other" 선택 시:**

- 텍스트 입력 프롬프트 표시
- 사용자가 완전한 커밋 메시지 입력 (헤더 + 본문)
- 입력된 메시지로 최종 확인 단계 진행

---

## 템플릿 4: 최종 확인 (커밋 직전)

### 상황

선택한 메시지로 커밋 직전 최종 확인

### 템플릿

```json
{
  "questions": [
    {
      "question": "이 메시지로 커밋하시겠습니까?",
      "header": "커밋 확인",
      "multiSelect": false,
      "options": [
        {
          "label": "승인 - 커밋 실행",
          "description": "이 메시지로 git commit을 실행합니다"
        },
        {
          "label": "수정",
          "description": "다른 메시지를 선택하거나 직접 입력합니다"
        },
        {
          "label": "취소",
          "description": "커밋 프로세스를 종료합니다"
        }
      ]
    }
  ]
}
```

### 화면 출력 (한글)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 최종 커밋 메시지:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

- SKILL.md: 스킬 실행 프로세스 정의
- RULES.md: 커밋 메시지 형식 규칙
- EXAMPLES.md: 실제 사용 예시
- TROUBLESHOOTING.md: 문제 해결 가이드
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이 메시지로 커밋하시겠습니까?

1. 승인 - 커밋 실행
   이 메시지로 git commit을 실행합니다

2. 수정
   다른 메시지를 선택하거나 직접 입력합니다

3. 취소
   커밋 프로세스를 종료합니다

4. Other (직접 입력)

선택:
```

---

## 템플릿 5: 메시지 수정 (직접 입력)

### 상황

사용자가 "Other" 옵션을 선택하여 직접 입력

### 프로세스

**1단계: Other 선택 감지**

```
사용자 선택: "Other"
```

**2단계: 입력 안내**

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✏️ 커밋 메시지 직접 입력
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

형식: <type>(scope): <message>

본문을 추가하려면 빈 줄 후 작성하세요.
예시:
  docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

  - SKILL.md: 스킬 실행 프로세스 정의
  - RULES.md: 커밋 메시지 형식 규칙

입력하세요:
```

**3단계: 입력받은 메시지 검증**

```
입력된 메시지:
docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

- SKILL.md: 스킬 실행 프로세스 정의
- RULES.md: 커밋 메시지 형식 규칙

[형식 검증 중...]
✅ 형식 검증 통과
```

**4단계: 최종 확인 (템플릿 4 재사용)**

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 최종 커밋 메시지:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

- SKILL.md: 스킬 실행 프로세스 정의
- RULES.md: 커밋 메시지 형식 규칙
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이 메시지로 커밋하시겠습니까?

1. 승인 - 커밋 실행
2. 수정
3. 취소

선택:
```

### 검증 실패 시

```
❌ 형식 검증 실패

오류: 커밋 타입이 잘못되었습니다
입력: "feature(commit-skill): ..."
허용: feat, fix, refactor, test, docs, style, chore

다시 입력하세요:
```

---

## 템플릿 6: 통합 커밋 재확인

### 상황

사용자가 "통합 커밋" 선택 시 재확인

### 템플릿

```json
{
  "questions": [
    {
      "question": "정말로 통합 커밋으로 진행하시겠습니까?",
      "header": "통합 커밋",
      "multiSelect": false,
      "options": [
        {
          "label": "아니오 - 자동 분리 (권장)",
          "description": "자동 분리 커밋으로 돌아갑니다. 각 그룹을 독립적으로 커밋합니다."
        },
        {
          "label": "예 - 통합 커밋",
          "description": "모든 변경을 하나의 커밋으로 진행합니다"
        },
        {
          "label": "취소",
          "description": "커밋 프로세스를 종료합니다"
        }
      ]
    }
  ]
}
```

### 화면 출력 (한글)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 통합 커밋 경고
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

기본 정책(자동 분리)을 따르지 않고 통합 커밋을 선택하셨습니다.

다시 한번 확인해주세요:
  • 82개 파일이 하나의 커밋에 포함됩니다
  • 커밋 목적이 불명확해질 수 있습니다
  • 코드 리뷰가 매우 어려워집니다
  • 부분 롤백이 불가능합니다
  • git bisect/cherry-pick/blame 활용 어려움

💡 도움말:
   통합 커밋은 전체 롤백과 코드 리뷰가 어려워질 수 있습니다.
   기본 정책(자동 분리)을 따르는 것을 권장합니다.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
정말로 통합 커밋으로 진행하시겠습니까?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 아니오 - 자동 분리 (권장)
   자동 분리 커밋으로 돌아갑니다. 각 그룹을 독립적으로 커밋합니다.

2. 예 - 통합 커밋
   모든 변경을 하나의 커밋으로 진행합니다

3. 취소
   커밋 프로세스를 종료합니다

4. Other (직접 입력)

선택:
```

---

## 완전한 플로우: 직접 입력 → 수정 → 확인 → 커밋

### 시나리오 1: 메시지 선택 단계에서 직접 입력

```
[Step 3: 메시지 선택]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 커밋 메시지를 선택하세요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 메시지 1 (추천)
2. 메시지 2
3. 메시지 3
4. 메시지 4
5. Other (직접 입력)

선택: 5

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✏️ 커밋 메시지 직접 입력
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

형식: <type>(scope): <message>

입력하세요:
→ docs(commit-skill): UI 템플릿 정형화
→
→ - 각 프로세스별 옵션 제시 템플릿
→ - AskUserQuestion 사용 가이드

[형식 검증 중...]
✅ 형식 검증 통과

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 최종 커밋 메시지:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
docs(commit-skill): UI 템플릿 정형화

- 각 프로세스별 옵션 제시 템플릿
- AskUserQuestion 사용 가이드
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이 메시지로 커밋하시겠습니까?

1. 승인 - 커밋 실행
2. 수정
3. 취소

선택: 1

[커밋 실행 중...]
✅ 커밋이 성공적으로 생성되었습니다!
커밋 해시: abc1234
메시지: docs(commit-skill): UI 템플릿 정형화
```

### 시나리오 2: 최종 확인 단계에서 수정

```
[Step 4: 최종 확인]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 최종 커밋 메시지:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
docs(commit-skill): 커밋 메시지 자동 생성 스킬 추가

- SKILL.md: 스킬 실행 프로세스 정의
- RULES.md: 커밋 메시지 형식 규칙
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

이 메시지로 커밋하시겠습니까?

1. 승인 - 커밋 실행
2. 수정
3. 취소

선택: 2

[다시 메시지 선택으로 돌아감]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 커밋 메시지를 선택하세요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 메시지 1 (추천)
2. 메시지 2
3. 메시지 3
4. 메시지 4
5. Other (직접 입력)

선택:
```

### 시나리오 3: 검증 실패 후 재입력

```
[직접 입력]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✏️ 커밋 메시지 직접 입력
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

입력하세요:
→ feature(commit-skill): 새 기능 추가

[형식 검증 중...]
❌ 형식 검증 실패

오류: 커밋 타입이 잘못되었습니다
입력: "feature(commit-skill): ..."
허용: feat, fix, refactor, test, docs, style, chore

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
다시 입력하세요:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 다시 입력
   커밋 메시지를 다시 작성합니다

2. 메시지 선택으로 돌아가기
   제안된 메시지 중 선택합니다

3. 취소
   커밋 프로세스를 종료합니다

선택: 1

입력하세요:
→ feat(commit-skill): 새 기능 추가

[형식 검증 중...]
✅ 형식 검증 통과

[최종 확인 단계로 진행...]
```

---

## 공통 UI 요소

### 헤더 스타일

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[아이콘] [제목]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**아이콘 사용:**

- ⚠️ 경고
- 📝 메시지 작성
- ✅ 성공
- ❌ 실패
- ✏️ 직접 입력
- 💡 도움말

### 옵션 표시 스타일

```
1. [레이블]
   [설명 1줄째]
   [설명 2줄째 (선택)]

2. [레이블]
   [설명]

...
```

### 도움말 박스

```
💡 도움말:
   [간결한 조언 또는 권장사항]
```

### 구분선

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 구현 체크리스트

### 필수 구현

- [ ] Tidy First 위반 감지 → 템플릿 1
- [ ] 논리적 독립성 감지 → 템플릿 2
- [ ] 커밋 메시지 선택 → 템플릿 3
- [ ] 최종 확인 → 템플릿 4
- [ ] 직접 입력 처리 → 템플릿 5
    - [ ] "Other" 옵션 감지
    - [ ] 텍스트 입력 받기
    - [ ] 형식 검증
    - [ ] 검증 실패 시 재입력
    - [ ] 최종 확인 단계 진행

### 선택 구현

- [ ] 통합 커밋 재확인 → 템플릿 6
- [ ] 메시지 수정 루프 (선택 → 수정 → 선택 반복)
- [ ] 입력 히스토리 (이전 입력 불러오기)
- [ ] 템플릿 자동 완성 (타이핑 중 제안)

---

## 에러 핸들링

### 빈 입력

```
입력하세요:
→ [Enter]

❌ 오류: 커밋 메시지가 비어있습니다

다시 입력하세요:
```

### 형식 오류

```
입력하세요:
→ 커밋 메시지 추가

❌ 형식 검증 실패

오류: 커밋 메시지 형식이 잘못되었습니다
입력: "커밋 메시지 추가"
형식: <type>(scope): <message>
예시: docs(README): 사용 가이드 추가

다시 입력하세요:
```

### 과도한 공백

```
입력하세요:
→ docs(commit-skill): 커밋 메시지 추가
→
→
→
→ - 본문
→
→
→ - 또 다른 본문

❌ 형식 검증 실패

오류: 공백 라인 블록이 너무 많습니다 (최대 2개)
감지: 3개의 공백 라인 블록

다시 입력하세요:
```

---

## Related Documents

- [PROCESS.md](PROCESS.md) - Execution process with templates
- [MESSAGE_GENERATION.md](MESSAGE_GENERATION.md) - Message generation strategy
- [RULES.md](RULES.md) - Commit message format rules
- [EXAMPLES.md](EXAMPLES.md) - Commit message examples
