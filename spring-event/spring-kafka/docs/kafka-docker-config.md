# [Kafka Docker Config - Environment Variables ì‚¬ìš© ê°€ì´ë“œ](https://github.com/apache/kafka/blob/trunk/docker/examples/README.md#using-environment-variables)

# Environment

- Kafka 4.0
- KRaft

## KRaft ëª¨ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

KRaft ë…¸ë“œë¥¼ ì‹¤í–‰í•  ë•Œ **í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°**, ë…¸ë“œ ì‹¤í–‰ì— í•„ìš”í•œ **ëª¨ë“  í•„ìˆ˜ ì†ì„±(properties)** ì„ ë°˜ë“œì‹œ ì§€ì •í•´ì•¼ í•œë‹¤.  
ì´ëŸ¬í•œ ì„¤ì • ë°©ì‹ì€ ì£¼ë¡œ **Docker Compose** í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤.

> **ğŸ’¡ Docker Compose ì‚¬ìš© ê¶Œì¥ ì´ìœ **  
> Composeë¥¼ ì‚¬ìš©í•˜ë©´ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ê°€ ìš©ì´í•˜ê³ , KRaft í´ëŸ¬ìŠ¤í„°ì˜ ìŠ¤ì¼€ì¼ ì•„ì›ƒ, ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ê´€ë¦¬ì—ë„ ìœ ë¦¬í•˜ë‹¤.

ë˜í•œ, **ì†ì„± íŒŒì¼ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥**í•˜ë‹¤.  
ì´ ê²½ìš°, ê³µí†µ ì„¤ì •ì€ **ì†ì„± íŒŒì¼**ì— ë‘ê³ , íŠ¹ì • ë…¸ë“œë§ˆë‹¤ ë‹¤ë¥¸ ê°’ì€ **í™˜ê²½ ë³€ìˆ˜**ë¡œ ì˜¤ë²„ë¼ì´ë“œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš´ì˜í•  ìˆ˜ ìˆë‹¤.

### 1. í™˜ê²½ ë³€ìˆ˜ ì ìš© ìš°ì„ ìˆœìœ„

- í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •í•œ ì†ì„±ì€ **ì†ì„± íŒŒì¼ì—ì„œ ì •ì˜ëœ ê°’ì„ ë®ì–´ì“´ë‹¤.**
- í™˜ê²½ ë³€ìˆ˜ë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, **ëª¨ë“  í•„ìˆ˜ ì†ì„±ì„ ë¹ ì§ì—†ì´ ì§€ì •í•´ì•¼ í•œë‹¤.**
    - ê¸°ë³¸ ì†ì„± íŒŒì¼ê³¼ ë³‘í–‰ ì‚¬ìš© ì‹œ, **í™˜ê²½ ë³€ìˆ˜ì— ì§€ì •ëœ ê°’ì´ í•­ìƒ ìš°ì„  ì ìš©**ëœë‹¤.  
      (ì˜ˆ: Docker ì´ë¯¸ì§€ ë‚´ ê¸°ë³¸ ì„¤ì •ë³´ë‹¤ í™˜ê²½ ë³€ìˆ˜ ê°’ì´ ë¨¼ì € ì ìš©ë¨)

> í•„ìˆ˜ ì†ì„± ëª©ë¡ì€ [Apache Kafka - Broker Config](https://kafka.apache.org/documentation/#brokerconfigs) ì—ì„œ í™•ì¸ ê°€ëŠ¥.

### 2. í™˜ê²½ ë³€ìˆ˜ í‚¤ ì‘ì„± ê·œì¹™

í™˜ê²½ ë³€ìˆ˜ í‚¤ë¥¼ ì‘ì„±í•  ë•ŒëŠ” ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¥¸ë‹¤.

|    ë³€í™˜ ëŒ€ìƒ    |         ë³€í™˜ ë°©ì‹         |
|:-----------:|:---------------------:|
|   `.` (ì )   |    `_` (ì–¸ë”ìŠ¤ì½”ì–´)ë¡œ ë³€í™˜    |
| `_` (ì–¸ë”ìŠ¤ì½”ì–´) |  `__` (ì–¸ë”ìŠ¤ì½”ì–´ 2ê°œ)ë¡œ ë³€í™˜  |
|  `-` (í•˜ì´í”ˆ)  | `___` (ì–¸ë”ìŠ¤ì½”ì–´ 3ê°œ)ë¡œ ë³€í™˜  |
|   ì ‘ë‘ì‚¬ ì¶”ê°€    | í•­ìƒ `KAFKA_` ë¥¼ ì ‘ë‘ì‚¬ë¡œ ë¶™ì„ |

#### example

|               ì›ë³¸ ì†ì„± í‚¤               |                   í™˜ê²½ ë³€ìˆ˜ í‚¤                   |
|:-----------------------------------:|:-------------------------------------------:|
|               node.id               |               `KAFKA_NODE_ID`               |
|              log.dirs               |              `KAFKA_LOG_DIRS`               |
|            process.roles            |            `KAFKA_PROCESS_ROLES`            |
| controller.quorum.bootstrap.servers | `KAFKA_CONTROLLER_QUORUM_BOOTSTRAP_SERVERS` |

## [## 3. Broker Config](https://kafka.apache.org/documentation/#brokerconfigs)

ë‹¤ìŒ ë³€ìˆ˜ëŠ” í•„ìˆ˜ ê°’ì´ë‹¤.

- node.id
- log.dirs
- process.roles
- controller.quorum.bootstrap.servers

Topic-level configurations and defaults are discussed in more detail below.

| name                                         | í•„ìˆ˜ | type   | default | valid value         | importance | update mode | description                                                                                                                                                                                                                                                                                |
|----------------------------------------------|----|--------|---------|---------------------|------------|-------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `node.id`                                    | O  | int    |         | [0,...]             | high       | read-only   | KRaft ëª¨ë“œì—ì„œëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ê° ë¸Œë¡œì»¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ì‹ë³„ì<br/>`process.roles`ê°€ broker,controllerì¸ ê²½ìš°, í•´ë‹¹ ì—­í• ì„ ìˆ˜í–‰í•                                                                                                                                                                                                 |
| `log.dirs`                                   | O  | string | null    |                     | high       | read-only   | ì¹´í”„ì¹´ ë¸Œë¡œì»¤ê°€ ë¡œê·¸ ë°ì´í„°ë¥¼ ì €ì¥í•  ë””ë ‰í„°ë¦¬ ê²½ë¡œ                                                                                                                                                                                                                                                               |
| `process.roles`                              | O  | list   |         | [broker,controller] | high       | read-only   | ë¸Œë¡œì»¤ì˜ ì—­í• <br/>- broker â†’ ë©”ì‹œì§€ë¥¼ ì €ì¥í•˜ê³ , í”„ë¡œë“€ì„œ & ì»¨ìŠˆë¨¸ì™€ ì§ì ‘ í†µì‹ í•˜ëŠ” ì—­í• <br/>- controller â†’ í´ëŸ¬ìŠ¤í„° ë©”íƒ€ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³ , ë¸Œë¡œì»¤ë¥¼ ì¡°ìœ¨í•˜ëŠ” ì—­í•                                                                                                                                                                                  |
| `controller.quorum.bootstrap.servers`        | O  | list   |""         | non-empty-list      | high       | read-only   | Kafka KRaft ëª¨ë“œ(Kafka Raft)ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì„¤ì •ìœ¼ë¡œ, ì£¼í‚¤í¼ ì—†ì´ ì¹´í”„ì¹´ ìì²´ì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•  ë•Œ í•„ìš”í•˜ë‹¤.<br/>- í•´ë‹¹ ì„¤ì •ì€ í´ëŸ¬ìŠ¤í„° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì´ˆê¸°í™”ì— í•„ìš”í•œ ì„œë²„ ëª©ë¡ì„ ì§€ì •í•œë‹¤.<br/>- {host}:{port} í˜•ì‹ìœ¼ë¡œ ì‰¼í‘œ( , )ë¡œ êµ¬ë¶„ëœ ì—¬ëŸ¬ ê°œì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.                                                                                                                                                            |
|                                              |    |        |         |                     |            |             |
| `add.partitions.to.txn.retry.backoff.max.ms` |    | int    | 20      | [0,...]             | high       | read-only   | Kafka íŠ¸ëœì­ì…˜ì—ì„œ íŒŒí‹°ì…˜ì„ ì¶”ê°€í•  ë•Œ í—ˆìš©ë˜ëŠ” ìµœëŒ€ íƒ€ì„ì•„ì›ƒ ê°’<br/>-ê²€ì¦ ì‘ì—…ì—ëŠ” ì ìš©ë˜ì§€ ì•Šê³ , ì‹¤ì œ ì¶”ê°€ ì‘ì—…ì—ë§Œ ì ìš©<br/>- ì´ ê°’ì´ `request.timeout.ms`ë³´ë‹¤ í¬ë©´ ì˜ë¯¸ ì—†ìŒ (ì¦‰, `request.timeout.ms` ê°’ ì´í•˜ë¡œ ì„¤ì •í•´ì•¼ í•¨)                                                                                                                               |
| `add.partitions.to.txn.retry.backoff.ms`     |    | int    | 20      | [1,...]             | high       | read-only   | ì„œë²„ê°€ íŠ¸ëœì­ì…˜ì— íŒŒí‹°ì…˜ì„ ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í•  ë•Œ ì ìš©ë˜ëŠ” ì„œë²„ ì¸¡ ì¬ì‹œë„(backoff) ê°„ê²©                                                                                                                                                                                                                                       |
| `advertised.listeners`|    | String | null    |                     | high       | read-only   | ë¸Œë¡œì»¤ê°€ í´ë¼ì´ì–¸íŠ¸ ë° ë‹¤ë¥¸ ë¸Œë¡œì»¤ì—ê²Œ ìì‹ ì˜ ì ‘ì† ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ì•Œë¦¬ëŠ” ì„¤ì •<br/>- í´ë¼ìš°ë“œ(IaaS) í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ IPì™€ ì™¸ë¶€ IPê°€ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì—°ê²°í•  ì˜¬ë°”ë¥¸ ì£¼ì†Œë¥¼ ì„¤ì •í•˜ëŠ” ë° ìœ ìš©<br/>- 0.0.0.0ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ (ë°˜ë“œì‹œ íŠ¹ì • IP ë˜ëŠ” ë„ë©”ì¸ì„ ì‚¬ìš©í•´ì•¼ í•¨)<br/> - ë™ì¼í•œ í¬íŠ¸ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ë¡œë“œë°¸ëŸ°ì„œë¥¼ ê³ ë ¤í•œ ì„¤ì •ì´ ê°€ëŠ¥<br/>- `advertised.listeners` ê°’ì´ ì—†ìœ¼ë©´ `listeners` ê°’ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš© |

## Reference

- [Apache Kafka - Release Note](https://kafka.apache.org/downloads)
- [Apache Kafka - Broker Config](https://kafka.apache.org/documentation/#brokerconfigs)
- [Docker Hub - Apache Kafka](https://hub.docker.com/r/apache/kafka)
- [github Apache Kafka - Example](https://github.com/apache/kafka/blob/trunk/docker/examples/README.md)
- [github Apache Kafka - Using Environment Variables](https://github.com/apache/kafka/blob/trunk/docker/examples/README.md#using-environment-variables)
