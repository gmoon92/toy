# Kafka Topic Naming Convention Guide

í† í”½ ë„¤ì´ë°ì—” í‘œì¤€ì€ ì—†ì§€ë§Œ, ì¡°ì§ ë‚´ ì¼ê´€ì„±ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.

## 1. ê¸°ë³¸ ì œì•½ ì¡°ê±´

- í—ˆìš© ë¬¸ì: ì˜ë¬¸ì(a-z), ìˆ«ì(0-9), `.`, `_`, `-`
- ê¸ˆì§€ ê·œì¹™:
    - `__` ì ‘ë‘ì–´ ì‚¬ìš© ê¸ˆì§€(ì¹´í”„ì¹´ ë‚´ë¶€ í† í”½ ì „ìš©)
    - `.` ë˜ëŠ” `..` ë‹¨ë… ì‚¬ìš© ê¸ˆì§€
    - `.` ì™€ `_` í˜¼ìš©í•˜ì—¬ ì‚¬ìš© ê¸ˆì§€
    - ì¤‘ë³µëœ êµ¬ë¶„ì ì‚¬ìš© ê¸ˆì§€ (`order..request`, `order--request`)
    - ë¹ˆ ë¬¸ìì—´ ë¶ˆê°€
    - 249ì ì´ìƒ ë¶ˆê°€

> Kafka ì‹œìŠ¤í…œ ë‚´ë¶€ í† í”½ì€ `__consumer_offsets`ì™€ ê°™ì´ `__`ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. ì¼ë°˜ ì‚¬ìš©ì í† í”½ê³¼ í˜¼ë™ì„ í”¼í•˜ê¸° ìœ„í•´ ê¸ˆì§€ë˜ì–´ì•¼ í•œë‹¤.

## 2. ì‹¤ë¬´ ê°€ì´ë“œë¼ì¸

- í† í”½ êµ¬ì„± ìš”ì†ŒëŠ” `.` ìœ¼ë¡œ êµ¬ë¶„ í†µì¼
- ì˜ì–´ ì†Œë¬¸ìë§Œ ì‚¬ìš© (`a-z`, `0-9`)
- ë²„ì „ ëª…ì‹œ
  - íŠ¸ëœì­ì…˜ ê²½ê³„, DB ë§ˆì´ê·¸ë ˆì´ì…˜ì‹œ í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€í•˜ê¸° ìœ„í•¨
- í™˜ê²½ ì •ë³´ëŠ” ë§ˆì§€ë§‰ì— `-env` í˜•ì‹ìœ¼ë¡œ ëª…ì‹œ
  - user.created.v1-alpha
  - user.created.v1-prod
- ê¸ˆì§€ ì‚¬í•­
  - ì „ì²´ í† í”½ ê¸¸ì´ëŠ” 255ì ì´ë‚´
  - ëŒ€ë¬¸ì ì‚¬ìš© ê¸ˆì§€ (`Order.Request.Result` âŒ)
  - íŠ¹ìˆ˜ë¬¸ì (`_`, `@`, `#`, ë“±) ì‚¬ìš© ê¸ˆì§€
  - ì¤‘ë³µëœ êµ¬ë¶„ì ì‚¬ìš© ê¸ˆì§€ (`order..request`, `order--request` âŒ)
  - ë„ˆë¬´ ì¼ë°˜ì ì´ê±°ë‚˜ ëª¨í˜¸í•œ ì´ë¦„ ì§€ì–‘ (`data`, `info` âŒ)

### 2.1. êµ¬ë¶„ì

ì¼ë°˜ì ìœ¼ë¡œ `.`, `_`ëŠ” êµ¬ì¡°ë‚˜ ë‹¨ì–´ì˜ **"êµ¬ë¶„ì" ë˜ëŠ” "ê²½ê³„ í‘œì‹œ" ì—­í• **ë¡œ ì‚¬ìš©ëœë‹¤.

- `.` ë˜ëŠ” `_` ì¤‘ **í•˜ë‚˜ë§Œ** ì‚¬ìš©, **í˜¼ìš© ê¸ˆì§€** (ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œ ì¶©ëŒ ê°€ëŠ¥ì„±)
- ì˜ˆ: `team.event.order` ë˜ëŠ” `team_event_order`

| êµ¬ë¶„ì         | ì„¤ëª…                | ì˜ˆì‹œ                          |
|-------------|-------------------|-----------------------------|
| `.` (ë§ˆì¹¨í‘œ)   | ê³„ì¸µì  êµ¬ì¡° í‘œí˜„ì— ì í•©     | `service.createduser.event` |
| `_` (ì–¸ë”ìŠ¤ì½”ì–´) | ë‹¨ì–´ êµ¬ë¶„ìë¡œ ì‚¬ìš©        | `service_created-user_event` |
| `-` (í•˜ì´í”ˆ)   | ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ êµ¬ë¶„ìë¡œ ì‚¬ìš© | `service.created-user.event` |

Kafkaì˜ ë‚´ë¶€ ì‹œìŠ¤í…œ í† í”½ì€ `__`(ë”ë¸” ì–¸ë”ìŠ¤ì½”ì–´)ë¡œ ì‹œì‘í•˜ëŠ” ê·œì¹™ì´ ìˆìœ¼ë©°, Dockerì—ì„œëŠ” `.`ë¥¼ `_`ë¡œ ë³€í™˜í•´ í™˜ê²½ ë³€ìˆ˜ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ì œì•ˆí•˜ê³  ìˆë‹¤.

ì´ëŸ¬í•œ ì ì„ ê³ ë ¤í•  ë•Œ, `-`ëŠ” ì—¬ëŸ¬ ë‹¨ì–´ë¥¼ ì—°ê²°í•˜ê±°ë‚˜ ë¬¸ì¥ í‘œí˜„ì—ì„œ **ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ êµ¬ë¶„ì(human-readable separator)**ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ì—ì„œëŠ” `.`ì„ **ê³„ì¸µì  êµ¬ì¡° í‘œí˜„**ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

### 2.2. ëª…ëª… íŒ¨í„´ ì˜ˆì‹œ

`{ì„œë¹„ìŠ¤/íŒ€}.{í™˜ê²½}.{ë„ë©”ì¸}.{ì´ë²¤íŠ¸/ì•¡ì…˜}.{í¬ë§·}.{ë²„ì „}`

ì˜ˆ: `payment.prod.order.created.avro.v1`

- ì´ë²¤íŠ¸ ê¸°ë°˜: `user.signup.success`
- íŒŒì´í”„ë¼ì¸ ê¸°ë°˜: `data.raw.sales.us-east`
- ë©€í‹° í…Œë„ŒíŠ¸: `tenantA.inventory.update`
- í™˜ê²½ í¬í•¨: `commerce.payment.transaction.prod`

## 3. ëŒ€ê¸°ì—… ì‚¬ë¡€ ë¶„ì„

### ì¹´ì¹´ì˜¤

- í˜•ì‹: `{ì„œë¹„ìŠ¤}.{í™˜ê²½}.{ë°ì´í„°ìœ í˜•}.{ë²„ì „}`
- ì˜ˆ: `kakaotalk.prod.message.v1`
- íŠ¹ì§•:
    - ë§ˆì¹¨í‘œ(`.`)ë§Œ ì‚¬ìš©
    - í™˜ê²½(`dev`/`stage`/`prod`) í•„ìˆ˜
    - ë²„ì „(`v1`) ëª…ì‹œ

### ë„¤ì´ë²„

- í˜•ì‹: `{íŒ€ëª…}-{ì‹œìŠ¤í…œëª…}-{ì´ë²¤íŠ¸ëª…}-{í™˜ê²½}`
- ì˜ˆ: `commerce-payment-ordercreated-prod`
- íŠ¹ì§•:
    - í•˜ì´í”ˆ(`-`)ë§Œ ì‚¬ìš©
    - íŒ€ ì˜¤ë„ˆì‹­ ëª…ì‹œ
    - í•„í„°ë§/ê²€ìƒ‰ì— ìš©ì´í•œ í˜•íƒœ

### ë¼ì¸

- í˜•ì‹: `{ë„ë©”ì¸}.{aggregate}.{action}.{format}`
- ì˜ˆ: `member.user.updated.avro`
- íŠ¹ì§•:
    - DDD ê¸°ë°˜ êµ¬ì¡°
    - ë°ì´í„° í¬ë§· í¬í•¨ (json, avro)
    - ëª¨ë‘ ì†Œë¬¸ì ì‚¬ìš©

### ì¿ íŒ¡

- í˜•ì‹: `{source}.{target}.{pipeline-stage}.{env}`
- ì˜ˆ: `oms.warehouse.transformation.prod`
- íŠ¹ì§•:
    - íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ í¬í•¨ (`raw`, `transformed`, `aggregated`)

### AWS / ë„·í”Œë¦­ìŠ¤

- í˜•ì‹: `{app}.{region}.{event}.{env}`
- ì˜ˆ: `recommendation.us-west-2.click.prod`
- íŠ¹ì§•:
    - ë¦¬ì „(region) ëª…ì‹œë¡œ ëª¨ë‹ˆí„°ë§ ìš©ì´

### 3.1 ê³µí†µ íŒ¨í„´ ìš”ì•½

| ê¸°ì—…          | ëª…ëª… êµ¬ì¡°                                      | êµ¬ë¶„ì | íŠ¹ì§•                     | ì˜ˆì‹œ í† í”½ ëª…                              |
|---------------|--------------------------------------------|--------|--------------------------|-------------------------------------------|
| ì¹´ì¹´ì˜¤         | `{ì„œë¹„ìŠ¤}.{í™˜ê²½}.{ë°ì´í„°ìœ í˜•}.{ë²„ì „}`                  | `.`    | ê³„ì¸µì  êµ¬ì¡°, ë²„ì „ ê´€ë¦¬ í•„ìˆ˜     | `order.prod.result.v1`                    |
| ë„¤ì´ë²„         | `{íŒ€}-{ì‹œìŠ¤í…œ}-{ì´ë²¤íŠ¸}-{í™˜ê²½}`                     | `-`    | íŒ€ ì¤‘ì‹¬, CLI í¸ì˜ì„± ê³ ë ¤     | `adplatform-user-login-prod`              |
| ë¼ì¸          | `{domain}.{aggregate}.{action}.{format}`   | `.`    | DDD ê¸°ë°˜, í¬ë§· ëª…ì‹œ        | `user.auth.login.json`                    |
| ì¿ íŒ¡          | `{source}.{target}.{pipeline-stage}.{env}` | `.`    | ETL ë‹¨ê³„ í¬í•¨              | `db.s3.extract.dev`                       |
| AWS/ë„·í”Œë¦­ìŠ¤   | `{app}.{region}.{event}.{env}`             | `.`    | ë¦¬ì „(region) ì •ë³´ í¬í•¨     | `video.us-east-1.playback.prod`           |

1. **êµ¬ë¶„ì ì¼ê´€ì„± ìœ ì§€**: `.` ë˜ëŠ” `-` ì¤‘ ì„ íƒ
2. **í™˜ê²½ ì •ë³´ í¬í•¨**: `dev`, `stage`, `prod` ë“±
3. **ì˜¤ë„ˆì‹­ ëª…ì‹œ**: íŒ€ëª… ë˜ëŠ” ì„œë¹„ìŠ¤ëª…
4. **ë°ì´í„° íŠ¹ì„± í¬í•¨**: ë°ì´í„° í¬ë§·(json/avro), ë²„ì „(v1 ë“±)
5. **ì†Œë¬¸ì ê°•ì œ ì‚¬ìš©**: ëŒ€ì†Œë¬¸ì í˜¼ìš© ê¸ˆì§€

## 5. Tips

- ì¹´ì¹´ì˜¤ëŠ” `.` êµ¬ë¶„ì, ë„¤ì´ë²„ëŠ” `-` êµ¬ë¶„ì ì„ í˜¸
- ë²„ì „ ì •ë³´ì™€ í™˜ê²½ ì •ë³´ëŠ” **í•„ìˆ˜ í¬í•¨**ì„ ê¶Œì¥
- í° ì¡°ì§ì¼ìˆ˜ë¡ **ëª…ëª… ê·œì¹™ ë¬¸ì„œí™” ë° ìë™ ê²€ì¦ ì‹œìŠ¤í…œ ë„ì…** í•„ìš”

## Reference

- [Confluent ê³µì‹ ê°€ì´ë“œ](https://www.confluent.io/learn/kafka-topic-naming-convention/)
- [Apache Kafka - topic naming](https://kafka.apache.org/documentation/#multitenancy-topic-naming)
- [YouTube ë„¤ì´ë²„ D2 ì»¨í¼ëŸ°ìŠ¤- ë„¤ì´ë²„ ìŠ¤ì¼€ì¼ë¡œ ì¹´í”„ì¹´ ì»¨ìŠˆë¨¸ ì‚¬ìš©í•˜ê¸°](https://www.youtube.com/watch?v=OxMdru93E6k)
- blogs
  - [ì—¬ê¸°ì–´ë•Œ ê¸°ìˆ  ë¸”ë¡œê·¸ - Apache Kafkaë¥¼ ì‚¬ìš©í•˜ì—¬ EDA ì ìš©í•˜ê¸°](https://techblog.gccompany.co.kr/apache-kafka%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-eda-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0-bf263c79efd0)
  - [Data Engineer Tech - [ğŸ§™Kafka] ì¹´í”„ì¹´ í† í”½ ì´ë¦„ ì§“ëŠ” ë²•(Topic Naming Convention)](https://data-engineer-tech.tistory.com/36)
  - [ê°œê¸°ì‹¬ì‚¬ ë¸”ë¡œê·¸ - ì¹´í”„ì¹´ í† í”½ ì´ë¦„ ì •í•˜ê¸° (Kafka Topic Naming Conventions)](https://devfoxstar.github.io/middleware/kafka-topic-naming/)
  - [ë§ˆë£¨-IT ë¸”ë¡œê·¸ - [Apache Kafka] 4. ì˜ë¯¸ ìˆëŠ” í† í”½ ì´ë¦„ ì‘ëª… ë°©ë²•](https://maru-itdeveloper.tistory.com/36)
  - [Digital Bourgeois - Kafka í† í”½ ë„¤ì´ë° ê·œì¹™: í˜¼ëˆì„ í”¼í•˜ê³  íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ë°©ë²•](https://digitalbourgeois.tistory.com/269)
  - [@parktaejung - #10 í† í”½ ì‘ëª… ë°©ë²•](https://velog.io/@parktaejung/10-%ED%86%A0%ED%94%BD-%EC%9E%91%EB%AA%85-%EB%B0%A9%EB%B2%95)
